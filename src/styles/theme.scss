// Theme API - Single entrypoint for SCSS theme helpers
// Uses CSS variables defined in globals.css (matching Tailwind v4's design scale)

@use 'sass:map';

// ============================================================================
// Spacing
// ============================================================================

/// Spacing helper that reuses Tailwind v4's base spacing unit
/// @param {Number} $n - Multiplier for the base spacing unit
/// @return {String} CSS calc expression using var(--spacing)
/// @example
///   padding: spacing(6); // calc(var(--spacing) * 6)
@function spacing($n) {
  @return calc(var(--spacing) * #{$n});
}

// ============================================================================
// Typography
// ============================================================================

/// Font size map - maps size names to CSS variables defined in globals.css
/// Values match Tailwind v4's typography scale
/// Note: Use quoted strings for numeric-prefixed sizes, e.g. fontSize('2xl')
$font-sizes: (
  // 0.75rem (12px)
  'xs': var(--text-xs),
  // 0.875rem (14px)
  'sm': var(--text-sm),
  // 1rem (16px)
  'base': var(--text-base),
  // 1.125rem (18px)
  'lg': var(--text-lg),
  // 1.25rem (20px)
  'xl': var(--text-xl),
  // 1.5rem (24px)
  '2xl': var(--text-2xl),
  // 1.875rem (30px)
  '3xl': var(--text-3xl),
  // 2.25rem (36px)
  '4xl': var(--text-4xl),
  // 3rem (48px)
  '5xl': var(--text-5xl),
  // 3.75rem (60px)
  '6xl': var(--text-6xl),
  // 4.5rem (72px)
  '7xl': var(--text-7xl),
  // 6rem (96px)
  '8xl': var(--text-8xl),
  // 8rem (128px)
  '9xl': var(--text-9xl)
);

/// Line height map - maps size names to CSS variables defined in globals.css
/// Values match Tailwind v4's typography scale
$line-heights: (
  // calc(1 / 0.75)
  'xs': var(--text-xs--line-height),
  // calc(1.25 / 0.875)
  'sm': var(--text-sm--line-height),
  // calc(1.5 / 1)
  'base': var(--text-base--line-height),
  // calc(1.75 / 1.125)
  'lg': var(--text-lg--line-height),
  // calc(1.75 / 1.25)
  'xl': var(--text-xl--line-height),
  // calc(2 / 1.5)
  '2xl': var(--text-2xl--line-height),
  // calc(2.25 / 1.875)
  '3xl': var(--text-3xl--line-height),
  // calc(2.5 / 2.25)
  '4xl': var(--text-4xl--line-height),
  // 1
  '5xl': var(--text-5xl--line-height),
  // 1
  '6xl': var(--text-6xl--line-height),
  // 1
  '7xl': var(--text-7xl--line-height),
  // 1
  '8xl': var(--text-8xl--line-height),
  // 1
  '9xl': var(--text-9xl--line-height)
);

/// Font weight map - maps size names to CSS variables defined in globals.css
/// Values match Tailwind v4's typography scale
$font-weights: (
  'light': var(--font-weight-light),
  'normal': var(--font-weight-normal),
  'medium': var(--font-weight-medium),
  'bold': var(--font-weight-bold),
);

/// Get font weight for a given size name
/// @param {String} $size - Size name (light, normal, medium, bold)
/// @return {String} CSS variable reference
/// @example
///   font-weight: fontWeight(bold); // var(--font-weight-bold)
@function fontWeight($size) {
  @if map.has-key($font-weights, $size) {
    @return map.get($font-weights, $size);
  }
  @error "Unknown font weight `#{$size}`. Allowed: #{map.keys($font-weights)}";
}

/// Get font size for a given size name
/// @param {String} $size - Size name (xs, sm, base, lg, xl, 2xl, 3xl, 4xl, 5xl, 6xl, 7xl, 8xl, 9xl)
/// @return {String} CSS variable reference
/// @example
///   font-size: fontSize(sm); // var(--text-sm)
@function fontSize($size) {
  @if map.has-key($font-sizes, $size) {
    @return map.get($font-sizes, $size);
  }
  @error "Unknown font size `#{$size}`. Allowed: #{map.keys($font-sizes)}";
}

/// Get line height for a given size name
/// @param {String} $size - Size name (xs, sm, base, lg, xl, 2xl, 3xl, 4xl, 5xl, 6xl, 7xl, 8xl, 9xl)
/// @return {String} CSS variable reference
/// @example
///   line-height: lineHeight(sm); // var(--text-sm--line-height)
@function lineHeight($size) {
  @if map.has-key($line-heights, $size) {
    @return map.get($line-heights, $size);
  }
  @error "Unknown line height key `#{$size}`. Allowed: #{map.keys($line-heights)}";
}

/// Mixin to set both font-size and line-height for a given size
/// @param {String} $size - Size name (xs, sm, base, lg, xl, 2xl, 3xl, 4xl, 5xl, 6xl, 7xl, 8xl, 9xl)
/// @example
///   @include text(lg);
@mixin text($size) {
  font-size: fontSize($size);
  line-height: lineHeight($size);
}

// ============================================================================
// Border Radius
// ============================================================================

/// Radius map - maps size names to CSS variables defined in globals.css
/// Values match Tailwind v4's border-radius scale
$radii: (
  // 0.125rem (2px)
  'xs': var(--radius-xs),
  // 0.25rem (4px)
  'sm': var(--radius-sm),
  // 0.375rem (6px)
  'md': var(--radius-md),
  // 0.5rem (8px)
  'lg': var(--radius-lg),
  // 0.75rem (12px)
  'xl': var(--radius-xl),
  // 1rem (16px)
  '2xl': var(--radius-2xl),
  // 1.5rem (24px)
  '3xl': var(--radius-3xl),
  // 2rem (32px)
  '4xl': var(--radius-4xl),
  'none': 0,
  'full': calc(infinity * 1px)
);

/// Get border radius for a given size name
/// @param {String} $size - Size name (xs, sm, md, lg, xl, 2xl, 3xl, 4xl, none, full)
/// @return {String} CSS variable reference or value
/// @example
///   border-radius: radius(xl); // var(--radius-xl)
@function radius($size) {
  @if map.has-key($radii, $size) {
    @return map.get($radii, $size);
  }
  @error "Unknown radius size `#{$size}`. Allowed: #{map.keys($radii)}";
}

// ============================================================================
// Breakpoints (Desktop-First)
// ============================================================================

/// Breakpoint map - desktop-first approach using max-width
/// Base styles target desktop; use mixins to override for smaller screens
$breakpoints: (
  // tablets and below (< 1024px)
  'tablet': 1023px,
  // mobile only (< 768px)
  'mobile': 767px
);

/// Media query mixin for screens below a breakpoint (desktop-first)
/// @param {String} $breakpoint - Breakpoint name (tablet, mobile)
/// @example
///   .element {
///     width: 50%;           // desktop default
///     @include below(tablet) { width: 75%; }
///     @include below(mobile) { width: 100%; }
///   }
@mixin below($breakpoint) {
  @if map.has-key($breakpoints, $breakpoint) {
    @media (max-width: #{map.get($breakpoints, $breakpoint)}) {
      @content;
    }
  } @else {
    @error "Unknown breakpoint `#{$breakpoint}`. Available: #{map.keys($breakpoints)}";
  }
}
